# HTTP的缓存机制

## 缓存的分类

### 强制缓存

- 如果缓存命中，则直接返回内容
- 如果缓存已过期，则向服务器请求数据，并在缓存中存入数据和缓存规则



### 协商缓存

- 若缓存命中，返回缓存数据的标识，并以该标识向服务器发送请求，验证是否失效：
    - 若未失效，则向缓存系统请求数据
    - 若已失效，则服务器返回数据和缓存规则，然后客户端将其存入缓存系统



## 实现缓存机制的有关字段

### cache-control

**作为请求字段**：

- no-cache：不使用缓存，强制向服务器进行确认
- max-age：最多缓存多久
- only-if-cached：从缓存获取资源



**作为响应字段**：

- public/private：缓存提供给所有用户或特定用户
- no-cache：客户端后续每次请求必须先向服务器确定资源的有效性。若资源未改变则返回304，客户端再向缓存系统请求数据
- no-store：下次请求还是发往服务器，并正常返回资源，状态为200



### If-Modified-Since

用于**请求头**中，和响应中的`last-modified`对应，表明能接受的最后更新时间



### Last-Modified

资源最后的修改时间



### If-None-Match

比较ETag是否发生变化和响应中的`ETag`对应。



比`If-Modified-Since`优先级更高



### ETag

资源的唯一标识







