---
title: 事件模型
category: 面试题
tag:
    - JS

---



## 事件模型

### 事件流的三个阶段

因为DOM是树结构，所以当触发子节点时，父子节点之间必然有一个顺序关系。



事件流都会经历三个阶段：

1. 事件捕获阶段：在DOM树中从上到下传递（从body节点到具体节点）
2. 处于目标阶段
3. 事件冒泡阶段：在DOM树中从下到上传递（从具体节点到body节点）



### 事件模型的三种分类

#### 原始事件模型（DOM0级）

**使用方法**：直接在DOM的标签上绑定监听函数；或通过JS代码绑定

- HTML代码中直接绑定

```html
<input type="button" onclick="fun()">
```

- 通过`JS`代码绑定

```js
var btn = document.getElementById('.btn');
btn.onclick = fun;
```

**特点**：

- 绑定速度快
- 只支持事件冒泡，不支持事件捕获
- 同一个类型的事件只能绑定一个响应函数（多次绑定会进行替换）

**删除方法**：```conclick=null```



#### 标准事件模型（DOM2级）

该事件模型中，一共有三个过程：

1. 捕获阶段。从`document`向下传递，依次检查所有元素是否绑定了监听函数，若有则执行
2. 事件处理阶段。事件到达目标元素，触发目标元素的响应函数
3. 事件冒泡阶段。事件从目标元素冒泡到`document`，依次检查经过的节点是否绑定了事件监听函数，如果有则执行 



事件绑定监听函数:

接收三个参数：事件名、响应函数、执行时机。

```js
dom.addEventListener(eventType, handler, useCapture)
```

`useCapture`为`true`时，会在捕获阶段执行。反之在冒泡阶段执行。



handler接收一个event参数，可以获取当前元素的标签，以及当前处于的阶段（取值为1、2、3，对应事件模型的三个阶段）：

```js
function onClickFn (event) {
    var tagName = event.currentTarget.tagName;
    var phase = event.eventPhase;
    console.log(tagName, phase);
}
```



事件移除监听函数:

```js
dom.removeEventListener(eventType, handler, useCapture)
```



#### IE事件模型（基本不用）

IE事件模型共有两个过程:

- 事件处理阶段：事件到达目标元素, 触发目标元素的监听函数。
- 事件冒泡阶段：事件从目标元素冒泡到`document`, 依次检查经过的节点是否绑定了事件监听函数，如果有则执行

